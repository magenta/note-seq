<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>note_seq.lead_sheets_lib API documentation</title>
<meta name="description" content="Utility functions for working with lead sheets." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>note_seq.lead_sheets_lib</code></h1>
</header>
<section id="section-intro">
<p>Utility functions for working with lead sheets.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># Copyright 2021 The Magenta Authors.
#
# Licensed under the Apache License, Version 2.0 (the &#34;License&#34;);
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an &#34;AS IS&#34; BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

&#34;&#34;&#34;Utility functions for working with lead sheets.&#34;&#34;&#34;

import copy
import itertools

from note_seq import chords_lib
from note_seq import constants
from note_seq import events_lib
from note_seq import melodies_lib
from note_seq.protobuf import music_pb2

# Constants.
DEFAULT_STEPS_PER_BAR = constants.DEFAULT_STEPS_PER_BAR
DEFAULT_STEPS_PER_QUARTER = constants.DEFAULT_STEPS_PER_QUARTER

DEFAULT_STEPS_PER_BAR = constants.DEFAULT_STEPS_PER_BAR
DEFAULT_STEPS_PER_QUARTER = constants.DEFAULT_STEPS_PER_QUARTER

# Shortcut to CHORD_SYMBOL annotation type.
CHORD_SYMBOL = music_pb2.NoteSequence.TextAnnotation.CHORD_SYMBOL


class MelodyChordsMismatchError(Exception):
  pass


class LeadSheet(events_lib.EventSequence):
  &#34;&#34;&#34;A wrapper around Melody and ChordProgression.

  Attributes:
    melody: A Melody object, the lead sheet melody.
    chords: A ChordProgression object, the underlying chords.
  &#34;&#34;&#34;

  def __init__(self, melody=None, chords=None):
    &#34;&#34;&#34;Construct a LeadSheet.

    If `melody` and `chords` are specified, instantiate with the provided
    melody and chords.  Otherwise, create an empty LeadSheet.

    Args:
      melody: A Melody object.
      chords: A ChordProgression object.

    Raises:
      MelodyChordsMismatchError: If the melody and chord progression differ
          in temporal resolution or position in the source sequence, or if only
          one of melody or chords is specified.
    &#34;&#34;&#34;
    if (melody is None) != (chords is None):
      raise MelodyChordsMismatchError(
          &#39;melody and chords must be both specified or both unspecified&#39;)
    if melody is not None:
      self._from_melody_and_chords(melody, chords)
    else:
      self._reset()

  def _reset(self):
    &#34;&#34;&#34;Clear events and reset object state.&#34;&#34;&#34;
    self._melody = melodies_lib.Melody()
    self._chords = chords_lib.ChordProgression()

  def _from_melody_and_chords(self, melody, chords):
    &#34;&#34;&#34;Initializes a LeadSheet with a given melody and chords.

    Args:
      melody: A Melody object.
      chords: A ChordProgression object.

    Raises:
      MelodyChordsMismatchError: If the melody and chord progression differ
          in temporal resolution or position in the source sequence.
    &#34;&#34;&#34;
    if (len(melody) != len(chords) or
        melody.steps_per_bar != chords.steps_per_bar or
        melody.steps_per_quarter != chords.steps_per_quarter or
        melody.start_step != chords.start_step or
        melody.end_step != chords.end_step):
      raise MelodyChordsMismatchError()
    self._melody = melody
    self._chords = chords

  def __iter__(self):
    &#34;&#34;&#34;Return an iterator over (melody, chord) tuples in this LeadSheet.

    Returns:
      Python iterator over (melody, chord) event tuples.
    &#34;&#34;&#34;
    return itertools.izip(self._melody, self._chords)

  def __getitem__(self, i):
    &#34;&#34;&#34;Returns the melody-chord tuple at the given index.&#34;&#34;&#34;
    return self._melody[i], self._chords[i]

  def __getslice__(self, i, j):
    &#34;&#34;&#34;Returns a LeadSheet object for the given slice range.&#34;&#34;&#34;
    return LeadSheet(self._melody[i:j], self._chords[i:j])

  def __len__(self):
    &#34;&#34;&#34;How many events (melody-chord tuples) are in this LeadSheet.

    Returns:
      Number of events as an integer.
    &#34;&#34;&#34;
    return len(self._melody)

  def __deepcopy__(self, memo=None):
    return LeadSheet(copy.deepcopy(self._melody, memo),
                     copy.deepcopy(self._chords, memo))

  def __eq__(self, other):
    if not isinstance(other, LeadSheet):
      return False
    return (self._melody == other.melody and
            self._chords == other.chords)

  @property
  def start_step(self):
    return self._melody.start_step

  @property
  def end_step(self):
    return self._melody.end_step

  @property
  def steps(self):
    return self._melody.steps

  @property
  def steps_per_bar(self):
    return self._melody.steps_per_bar

  @property
  def steps_per_quarter(self):
    return self._melody.steps_per_quarter

  @property
  def melody(self):
    &#34;&#34;&#34;Return the melody of the lead sheet.

    Returns:
        The lead sheet melody, a Melody object.
    &#34;&#34;&#34;
    return self._melody

  @property
  def chords(self):
    &#34;&#34;&#34;Return the chord progression of the lead sheet.

    Returns:
        The lead sheet chords, a ChordProgression object.
    &#34;&#34;&#34;
    return self._chords

  def append(self, event):
    &#34;&#34;&#34;Appends event to the end of the sequence and increments the end step.

    Args:
      event: The event (a melody-chord tuple) to append to the end.
    &#34;&#34;&#34;
    melody_event, chord_event = event
    self._melody.append(melody_event)
    self._chords.append(chord_event)

  def to_sequence(self,
                  velocity=100,
                  instrument=0,
                  sequence_start_time=0.0,
                  qpm=120.0):
    &#34;&#34;&#34;Converts the LeadSheet to NoteSequence proto.

    Args:
      velocity: Midi velocity to give each melody note. Between 1 and 127
          (inclusive).
      instrument: Midi instrument to give each melody note.
      sequence_start_time: A time in seconds (float) that the first note (and
          chord) in the sequence will land on.
      qpm: Quarter notes per minute (float).

    Returns:
      A NoteSequence proto encoding the melody and chords from the lead sheet.
    &#34;&#34;&#34;
    sequence = self._melody.to_sequence(
        velocity=velocity, instrument=instrument,
        sequence_start_time=sequence_start_time, qpm=qpm)
    chord_sequence = self._chords.to_sequence(
        sequence_start_time=sequence_start_time, qpm=qpm)
    # A little ugly, but just add the chord annotations to the melody sequence.
    for text_annotation in chord_sequence.text_annotations:
      if text_annotation.annotation_type == CHORD_SYMBOL:
        chord = sequence.text_annotations.add()
        chord.CopyFrom(text_annotation)
    return sequence

  def transpose(self, transpose_amount, min_note=0, max_note=128):
    &#34;&#34;&#34;Transpose notes and chords in this LeadSheet.

    All notes and chords are transposed the specified amount. Additionally,
    all notes are octave shifted to lie within the [min_note, max_note) range.

    Args:
      transpose_amount: The number of half steps to transpose this
          LeadSheet. Positive values transpose up. Negative values
          transpose down.
      min_note: Minimum pitch (inclusive) that the resulting notes will take on.
      max_note: Maximum pitch (exclusive) that the resulting notes will take on.
    &#34;&#34;&#34;
    self._melody.transpose(transpose_amount, min_note, max_note)
    self._chords.transpose(transpose_amount)

  def squash(self, min_note, max_note, transpose_to_key):
    &#34;&#34;&#34;Transpose and octave shift the notes and chords in this LeadSheet.

    Args:
      min_note: Minimum pitch (inclusive) that the resulting notes will take on.
      max_note: Maximum pitch (exclusive) that the resulting notes will take on.
      transpose_to_key: The lead sheet is transposed to be in this key.

    Returns:
      The transpose amount, in half steps.
    &#34;&#34;&#34;
    transpose_amount = self._melody.squash(min_note, max_note,
                                           transpose_to_key)
    self._chords.transpose(transpose_amount)
    return transpose_amount

  def set_length(self, steps):
    &#34;&#34;&#34;Sets the length of the lead sheet to the specified number of steps.

    Args:
      steps: How many steps long the lead sheet should be.
    &#34;&#34;&#34;
    self._melody.set_length(steps)
    self._chords.set_length(steps)

  def increase_resolution(self, k):
    &#34;&#34;&#34;Increase the resolution of a LeadSheet.

    Increases the resolution of a LeadSheet object by a factor of `k`. This
    increases the resolution of the melody and chords separately, which uses
    MELODY_NO_EVENT to extend each event in the melody, and simply repeats each
    chord event `k` times.

    Args:
      k: An integer, the factor by which to increase the resolution of the lead
          sheet.
    &#34;&#34;&#34;
    self._melody.increase_resolution(k)
    self._chords.increase_resolution(k)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="note_seq.lead_sheets_lib.LeadSheet"><code class="flex name class">
<span>class <span class="ident">LeadSheet</span></span>
<span>(</span><span>melody=None, chords=None)</span>
</code></dt>
<dd>
<div class="desc"><p>A wrapper around Melody and ChordProgression.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>melody</code></strong></dt>
<dd>A Melody object, the lead sheet melody.</dd>
<dt><strong><code>chords</code></strong></dt>
<dd>A ChordProgression object, the underlying chords.</dd>
</dl>
<p>Construct a LeadSheet.</p>
<p>If <code>melody</code> and <code>chords</code> are specified, instantiate with the provided
melody and chords.
Otherwise, create an empty LeadSheet.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>melody</code></strong></dt>
<dd>A Melody object.</dd>
<dt><strong><code>chords</code></strong></dt>
<dd>A ChordProgression object.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code><a title="note_seq.lead_sheets_lib.MelodyChordsMismatchError" href="#note_seq.lead_sheets_lib.MelodyChordsMismatchError">MelodyChordsMismatchError</a></code></dt>
<dd>If the melody and chord progression differ
in temporal resolution or position in the source sequence, or if only
one of melody or chords is specified.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class LeadSheet(events_lib.EventSequence):
  &#34;&#34;&#34;A wrapper around Melody and ChordProgression.

  Attributes:
    melody: A Melody object, the lead sheet melody.
    chords: A ChordProgression object, the underlying chords.
  &#34;&#34;&#34;

  def __init__(self, melody=None, chords=None):
    &#34;&#34;&#34;Construct a LeadSheet.

    If `melody` and `chords` are specified, instantiate with the provided
    melody and chords.  Otherwise, create an empty LeadSheet.

    Args:
      melody: A Melody object.
      chords: A ChordProgression object.

    Raises:
      MelodyChordsMismatchError: If the melody and chord progression differ
          in temporal resolution or position in the source sequence, or if only
          one of melody or chords is specified.
    &#34;&#34;&#34;
    if (melody is None) != (chords is None):
      raise MelodyChordsMismatchError(
          &#39;melody and chords must be both specified or both unspecified&#39;)
    if melody is not None:
      self._from_melody_and_chords(melody, chords)
    else:
      self._reset()

  def _reset(self):
    &#34;&#34;&#34;Clear events and reset object state.&#34;&#34;&#34;
    self._melody = melodies_lib.Melody()
    self._chords = chords_lib.ChordProgression()

  def _from_melody_and_chords(self, melody, chords):
    &#34;&#34;&#34;Initializes a LeadSheet with a given melody and chords.

    Args:
      melody: A Melody object.
      chords: A ChordProgression object.

    Raises:
      MelodyChordsMismatchError: If the melody and chord progression differ
          in temporal resolution or position in the source sequence.
    &#34;&#34;&#34;
    if (len(melody) != len(chords) or
        melody.steps_per_bar != chords.steps_per_bar or
        melody.steps_per_quarter != chords.steps_per_quarter or
        melody.start_step != chords.start_step or
        melody.end_step != chords.end_step):
      raise MelodyChordsMismatchError()
    self._melody = melody
    self._chords = chords

  def __iter__(self):
    &#34;&#34;&#34;Return an iterator over (melody, chord) tuples in this LeadSheet.

    Returns:
      Python iterator over (melody, chord) event tuples.
    &#34;&#34;&#34;
    return itertools.izip(self._melody, self._chords)

  def __getitem__(self, i):
    &#34;&#34;&#34;Returns the melody-chord tuple at the given index.&#34;&#34;&#34;
    return self._melody[i], self._chords[i]

  def __getslice__(self, i, j):
    &#34;&#34;&#34;Returns a LeadSheet object for the given slice range.&#34;&#34;&#34;
    return LeadSheet(self._melody[i:j], self._chords[i:j])

  def __len__(self):
    &#34;&#34;&#34;How many events (melody-chord tuples) are in this LeadSheet.

    Returns:
      Number of events as an integer.
    &#34;&#34;&#34;
    return len(self._melody)

  def __deepcopy__(self, memo=None):
    return LeadSheet(copy.deepcopy(self._melody, memo),
                     copy.deepcopy(self._chords, memo))

  def __eq__(self, other):
    if not isinstance(other, LeadSheet):
      return False
    return (self._melody == other.melody and
            self._chords == other.chords)

  @property
  def start_step(self):
    return self._melody.start_step

  @property
  def end_step(self):
    return self._melody.end_step

  @property
  def steps(self):
    return self._melody.steps

  @property
  def steps_per_bar(self):
    return self._melody.steps_per_bar

  @property
  def steps_per_quarter(self):
    return self._melody.steps_per_quarter

  @property
  def melody(self):
    &#34;&#34;&#34;Return the melody of the lead sheet.

    Returns:
        The lead sheet melody, a Melody object.
    &#34;&#34;&#34;
    return self._melody

  @property
  def chords(self):
    &#34;&#34;&#34;Return the chord progression of the lead sheet.

    Returns:
        The lead sheet chords, a ChordProgression object.
    &#34;&#34;&#34;
    return self._chords

  def append(self, event):
    &#34;&#34;&#34;Appends event to the end of the sequence and increments the end step.

    Args:
      event: The event (a melody-chord tuple) to append to the end.
    &#34;&#34;&#34;
    melody_event, chord_event = event
    self._melody.append(melody_event)
    self._chords.append(chord_event)

  def to_sequence(self,
                  velocity=100,
                  instrument=0,
                  sequence_start_time=0.0,
                  qpm=120.0):
    &#34;&#34;&#34;Converts the LeadSheet to NoteSequence proto.

    Args:
      velocity: Midi velocity to give each melody note. Between 1 and 127
          (inclusive).
      instrument: Midi instrument to give each melody note.
      sequence_start_time: A time in seconds (float) that the first note (and
          chord) in the sequence will land on.
      qpm: Quarter notes per minute (float).

    Returns:
      A NoteSequence proto encoding the melody and chords from the lead sheet.
    &#34;&#34;&#34;
    sequence = self._melody.to_sequence(
        velocity=velocity, instrument=instrument,
        sequence_start_time=sequence_start_time, qpm=qpm)
    chord_sequence = self._chords.to_sequence(
        sequence_start_time=sequence_start_time, qpm=qpm)
    # A little ugly, but just add the chord annotations to the melody sequence.
    for text_annotation in chord_sequence.text_annotations:
      if text_annotation.annotation_type == CHORD_SYMBOL:
        chord = sequence.text_annotations.add()
        chord.CopyFrom(text_annotation)
    return sequence

  def transpose(self, transpose_amount, min_note=0, max_note=128):
    &#34;&#34;&#34;Transpose notes and chords in this LeadSheet.

    All notes and chords are transposed the specified amount. Additionally,
    all notes are octave shifted to lie within the [min_note, max_note) range.

    Args:
      transpose_amount: The number of half steps to transpose this
          LeadSheet. Positive values transpose up. Negative values
          transpose down.
      min_note: Minimum pitch (inclusive) that the resulting notes will take on.
      max_note: Maximum pitch (exclusive) that the resulting notes will take on.
    &#34;&#34;&#34;
    self._melody.transpose(transpose_amount, min_note, max_note)
    self._chords.transpose(transpose_amount)

  def squash(self, min_note, max_note, transpose_to_key):
    &#34;&#34;&#34;Transpose and octave shift the notes and chords in this LeadSheet.

    Args:
      min_note: Minimum pitch (inclusive) that the resulting notes will take on.
      max_note: Maximum pitch (exclusive) that the resulting notes will take on.
      transpose_to_key: The lead sheet is transposed to be in this key.

    Returns:
      The transpose amount, in half steps.
    &#34;&#34;&#34;
    transpose_amount = self._melody.squash(min_note, max_note,
                                           transpose_to_key)
    self._chords.transpose(transpose_amount)
    return transpose_amount

  def set_length(self, steps):
    &#34;&#34;&#34;Sets the length of the lead sheet to the specified number of steps.

    Args:
      steps: How many steps long the lead sheet should be.
    &#34;&#34;&#34;
    self._melody.set_length(steps)
    self._chords.set_length(steps)

  def increase_resolution(self, k):
    &#34;&#34;&#34;Increase the resolution of a LeadSheet.

    Increases the resolution of a LeadSheet object by a factor of `k`. This
    increases the resolution of the melody and chords separately, which uses
    MELODY_NO_EVENT to extend each event in the melody, and simply repeats each
    chord event `k` times.

    Args:
      k: An integer, the factor by which to increase the resolution of the lead
          sheet.
    &#34;&#34;&#34;
    self._melody.increase_resolution(k)
    self._chords.increase_resolution(k)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="note_seq.events_lib.EventSequence" href="events_lib.html#note_seq.events_lib.EventSequence">EventSequence</a></li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="note_seq.lead_sheets_lib.LeadSheet.chords"><code class="name">var <span class="ident">chords</span></code></dt>
<dd>
<div class="desc"><p>Return the chord progression of the lead sheet.</p>
<h2 id="returns">Returns</h2>
<p>The lead sheet chords, a ChordProgression object.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def chords(self):
  &#34;&#34;&#34;Return the chord progression of the lead sheet.

  Returns:
      The lead sheet chords, a ChordProgression object.
  &#34;&#34;&#34;
  return self._chords</code></pre>
</details>
</dd>
<dt id="note_seq.lead_sheets_lib.LeadSheet.end_step"><code class="name">var <span class="ident">end_step</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def end_step(self):
  return self._melody.end_step</code></pre>
</details>
</dd>
<dt id="note_seq.lead_sheets_lib.LeadSheet.melody"><code class="name">var <span class="ident">melody</span></code></dt>
<dd>
<div class="desc"><p>Return the melody of the lead sheet.</p>
<h2 id="returns">Returns</h2>
<p>The lead sheet melody, a Melody object.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def melody(self):
  &#34;&#34;&#34;Return the melody of the lead sheet.

  Returns:
      The lead sheet melody, a Melody object.
  &#34;&#34;&#34;
  return self._melody</code></pre>
</details>
</dd>
<dt id="note_seq.lead_sheets_lib.LeadSheet.start_step"><code class="name">var <span class="ident">start_step</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def start_step(self):
  return self._melody.start_step</code></pre>
</details>
</dd>
<dt id="note_seq.lead_sheets_lib.LeadSheet.steps"><code class="name">var <span class="ident">steps</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def steps(self):
  return self._melody.steps</code></pre>
</details>
</dd>
<dt id="note_seq.lead_sheets_lib.LeadSheet.steps_per_bar"><code class="name">var <span class="ident">steps_per_bar</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def steps_per_bar(self):
  return self._melody.steps_per_bar</code></pre>
</details>
</dd>
<dt id="note_seq.lead_sheets_lib.LeadSheet.steps_per_quarter"><code class="name">var <span class="ident">steps_per_quarter</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def steps_per_quarter(self):
  return self._melody.steps_per_quarter</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="note_seq.lead_sheets_lib.LeadSheet.append"><code class="name flex">
<span>def <span class="ident">append</span></span>(<span>self, event)</span>
</code></dt>
<dd>
<div class="desc"><p>Appends event to the end of the sequence and increments the end step.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>event</code></strong></dt>
<dd>The event (a melody-chord tuple) to append to the end.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def append(self, event):
  &#34;&#34;&#34;Appends event to the end of the sequence and increments the end step.

  Args:
    event: The event (a melody-chord tuple) to append to the end.
  &#34;&#34;&#34;
  melody_event, chord_event = event
  self._melody.append(melody_event)
  self._chords.append(chord_event)</code></pre>
</details>
</dd>
<dt id="note_seq.lead_sheets_lib.LeadSheet.increase_resolution"><code class="name flex">
<span>def <span class="ident">increase_resolution</span></span>(<span>self, k)</span>
</code></dt>
<dd>
<div class="desc"><p>Increase the resolution of a LeadSheet.</p>
<p>Increases the resolution of a LeadSheet object by a factor of <code>k</code>. This
increases the resolution of the melody and chords separately, which uses
MELODY_NO_EVENT to extend each event in the melody, and simply repeats each
chord event <code>k</code> times.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>k</code></strong></dt>
<dd>An integer, the factor by which to increase the resolution of the lead
sheet.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def increase_resolution(self, k):
  &#34;&#34;&#34;Increase the resolution of a LeadSheet.

  Increases the resolution of a LeadSheet object by a factor of `k`. This
  increases the resolution of the melody and chords separately, which uses
  MELODY_NO_EVENT to extend each event in the melody, and simply repeats each
  chord event `k` times.

  Args:
    k: An integer, the factor by which to increase the resolution of the lead
        sheet.
  &#34;&#34;&#34;
  self._melody.increase_resolution(k)
  self._chords.increase_resolution(k)</code></pre>
</details>
</dd>
<dt id="note_seq.lead_sheets_lib.LeadSheet.set_length"><code class="name flex">
<span>def <span class="ident">set_length</span></span>(<span>self, steps)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets the length of the lead sheet to the specified number of steps.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>steps</code></strong></dt>
<dd>How many steps long the lead sheet should be.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_length(self, steps):
  &#34;&#34;&#34;Sets the length of the lead sheet to the specified number of steps.

  Args:
    steps: How many steps long the lead sheet should be.
  &#34;&#34;&#34;
  self._melody.set_length(steps)
  self._chords.set_length(steps)</code></pre>
</details>
</dd>
<dt id="note_seq.lead_sheets_lib.LeadSheet.squash"><code class="name flex">
<span>def <span class="ident">squash</span></span>(<span>self, min_note, max_note, transpose_to_key)</span>
</code></dt>
<dd>
<div class="desc"><p>Transpose and octave shift the notes and chords in this LeadSheet.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>min_note</code></strong></dt>
<dd>Minimum pitch (inclusive) that the resulting notes will take on.</dd>
<dt><strong><code>max_note</code></strong></dt>
<dd>Maximum pitch (exclusive) that the resulting notes will take on.</dd>
<dt><strong><code>transpose_to_key</code></strong></dt>
<dd>The lead sheet is transposed to be in this key.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>The transpose amount, in half steps.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def squash(self, min_note, max_note, transpose_to_key):
  &#34;&#34;&#34;Transpose and octave shift the notes and chords in this LeadSheet.

  Args:
    min_note: Minimum pitch (inclusive) that the resulting notes will take on.
    max_note: Maximum pitch (exclusive) that the resulting notes will take on.
    transpose_to_key: The lead sheet is transposed to be in this key.

  Returns:
    The transpose amount, in half steps.
  &#34;&#34;&#34;
  transpose_amount = self._melody.squash(min_note, max_note,
                                         transpose_to_key)
  self._chords.transpose(transpose_amount)
  return transpose_amount</code></pre>
</details>
</dd>
<dt id="note_seq.lead_sheets_lib.LeadSheet.to_sequence"><code class="name flex">
<span>def <span class="ident">to_sequence</span></span>(<span>self, velocity=100, instrument=0, sequence_start_time=0.0, qpm=120.0)</span>
</code></dt>
<dd>
<div class="desc"><p>Converts the LeadSheet to NoteSequence proto.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>velocity</code></strong></dt>
<dd>Midi velocity to give each melody note. Between 1 and 127
(inclusive).</dd>
<dt><strong><code>instrument</code></strong></dt>
<dd>Midi instrument to give each melody note.</dd>
<dt><strong><code>sequence_start_time</code></strong></dt>
<dd>A time in seconds (float) that the first note (and
chord) in the sequence will land on.</dd>
<dt><strong><code>qpm</code></strong></dt>
<dd>Quarter notes per minute (float).</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>A NoteSequence proto encoding the melody and chords from the lead sheet.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def to_sequence(self,
                velocity=100,
                instrument=0,
                sequence_start_time=0.0,
                qpm=120.0):
  &#34;&#34;&#34;Converts the LeadSheet to NoteSequence proto.

  Args:
    velocity: Midi velocity to give each melody note. Between 1 and 127
        (inclusive).
    instrument: Midi instrument to give each melody note.
    sequence_start_time: A time in seconds (float) that the first note (and
        chord) in the sequence will land on.
    qpm: Quarter notes per minute (float).

  Returns:
    A NoteSequence proto encoding the melody and chords from the lead sheet.
  &#34;&#34;&#34;
  sequence = self._melody.to_sequence(
      velocity=velocity, instrument=instrument,
      sequence_start_time=sequence_start_time, qpm=qpm)
  chord_sequence = self._chords.to_sequence(
      sequence_start_time=sequence_start_time, qpm=qpm)
  # A little ugly, but just add the chord annotations to the melody sequence.
  for text_annotation in chord_sequence.text_annotations:
    if text_annotation.annotation_type == CHORD_SYMBOL:
      chord = sequence.text_annotations.add()
      chord.CopyFrom(text_annotation)
  return sequence</code></pre>
</details>
</dd>
<dt id="note_seq.lead_sheets_lib.LeadSheet.transpose"><code class="name flex">
<span>def <span class="ident">transpose</span></span>(<span>self, transpose_amount, min_note=0, max_note=128)</span>
</code></dt>
<dd>
<div class="desc"><p>Transpose notes and chords in this LeadSheet.</p>
<p>All notes and chords are transposed the specified amount. Additionally,
all notes are octave shifted to lie within the [min_note, max_note) range.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>transpose_amount</code></strong></dt>
<dd>The number of half steps to transpose this
LeadSheet. Positive values transpose up. Negative values
transpose down.</dd>
<dt><strong><code>min_note</code></strong></dt>
<dd>Minimum pitch (inclusive) that the resulting notes will take on.</dd>
<dt><strong><code>max_note</code></strong></dt>
<dd>Maximum pitch (exclusive) that the resulting notes will take on.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def transpose(self, transpose_amount, min_note=0, max_note=128):
  &#34;&#34;&#34;Transpose notes and chords in this LeadSheet.

  All notes and chords are transposed the specified amount. Additionally,
  all notes are octave shifted to lie within the [min_note, max_note) range.

  Args:
    transpose_amount: The number of half steps to transpose this
        LeadSheet. Positive values transpose up. Negative values
        transpose down.
    min_note: Minimum pitch (inclusive) that the resulting notes will take on.
    max_note: Maximum pitch (exclusive) that the resulting notes will take on.
  &#34;&#34;&#34;
  self._melody.transpose(transpose_amount, min_note, max_note)
  self._chords.transpose(transpose_amount)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="note_seq.lead_sheets_lib.MelodyChordsMismatchError"><code class="flex name class">
<span>class <span class="ident">MelodyChordsMismatchError</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Common base class for all non-exit exceptions.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MelodyChordsMismatchError(Exception):
  pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="note_seq" href="index.html">note_seq</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="note_seq.lead_sheets_lib.LeadSheet" href="#note_seq.lead_sheets_lib.LeadSheet">LeadSheet</a></code></h4>
<ul class="two-column">
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.append" href="#note_seq.lead_sheets_lib.LeadSheet.append">append</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.chords" href="#note_seq.lead_sheets_lib.LeadSheet.chords">chords</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.end_step" href="#note_seq.lead_sheets_lib.LeadSheet.end_step">end_step</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.increase_resolution" href="#note_seq.lead_sheets_lib.LeadSheet.increase_resolution">increase_resolution</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.melody" href="#note_seq.lead_sheets_lib.LeadSheet.melody">melody</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.set_length" href="#note_seq.lead_sheets_lib.LeadSheet.set_length">set_length</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.squash" href="#note_seq.lead_sheets_lib.LeadSheet.squash">squash</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.start_step" href="#note_seq.lead_sheets_lib.LeadSheet.start_step">start_step</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.steps" href="#note_seq.lead_sheets_lib.LeadSheet.steps">steps</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.steps_per_bar" href="#note_seq.lead_sheets_lib.LeadSheet.steps_per_bar">steps_per_bar</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.steps_per_quarter" href="#note_seq.lead_sheets_lib.LeadSheet.steps_per_quarter">steps_per_quarter</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.to_sequence" href="#note_seq.lead_sheets_lib.LeadSheet.to_sequence">to_sequence</a></code></li>
<li><code><a title="note_seq.lead_sheets_lib.LeadSheet.transpose" href="#note_seq.lead_sheets_lib.LeadSheet.transpose">transpose</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="note_seq.lead_sheets_lib.MelodyChordsMismatchError" href="#note_seq.lead_sheets_lib.MelodyChordsMismatchError">MelodyChordsMismatchError</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>